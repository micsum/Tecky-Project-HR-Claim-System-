<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="/changepassword" method="POST" id="contact-form">
        <div>
            <label for="employeeName">
              Employee Name:
              <input
                type="text"
                name="employeeName"
                required
              />
            </label>
          </div>
        <div>
          <label for="email">
            Email:
            <input
              type="text"
              name="email"
              required
            />
          </label>
        </div>
        <div>
            <label for="currentPassword">
              Current Password:
              <input
                type="text"
                name="currentPassword"
               
                required
              />
            </label>
          </div>
          <div>
            <label for="newPassword">
              New Password:
              <input
                type="text"
                name="newPassword"
                required
              />
            </label>
          </div>
          <div>
            <label for="rePassword">
              New Password Again:
              <input
                type="text"
                name="rePassword"
                required
              />
            </label>
          </div>

        <div>
          <input type="submit" value="Submit" class="submitbutton" />
          <input type="reset" value="Clear" />
        </div>
      </form>
</body>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  let contactForm = document.querySelector("#contact-form");

  contactForm.addEventListener("submit", async (event) => {
    event.preventDefault();
    console.log("submitted");
    let form = event.target;
    let formObject = {};
    formObject["employeeName"] = form.employeeName.value;
    formObject["email"] = form.email.value;
    formObject["currentPassword"] = form.currentPassword.value;
    formObject["newPassword"] = form.newPassword.value;
    formObject["rePassword"] = form.rePassword.value;
//    console.log(formObject)
    let res = await fetch("/changepassword", {
    method:"POST",
    headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify(formObject),
    });
    const result = await res.json(); // { success: true }
    console.log('result: ', result.error)
if(result.error !== "Success"){
      Swal.fire({
  icon: 'error',
  title: '',
  text: result.error,
})
}
if(result.error === "Success"){
Swal.fire({
  icon: "success",
  title: "",
  text: "Successfully Changed Password"
})
console.log(result.error)
}
//if(result.error == "123" ){
//    Swal.fire({
//  position: 'top-end',
//  icon: 'success',
//  title: 'Your work has been saved',
//  showConfirmButton: false,
//  timer: 1500
//})
//}   

});
 </script>
</html>